function init(){container=document.getElementById("container123"),(renderer=new THREE.WebGLRenderer({antialias:!0})).setSize(container.offsetWidth,container.offsetHeight),container.appendChild(renderer.domElement),(camera=new THREE.PerspectiveCamera(25,window.innerWidth/window.innerHeight,1,2e3)).position.set(7,2,18),scene=new THREE.Scene;var e=new THREE.PlaneBufferGeometry(500,500),a=new THREE.MeshPhongMaterial({color:16777198,specular:329045});a.color.setHSL(.095,1,.75);var t=new THREE.Mesh(e,a);t.rotation.x=-Math.PI/2,t.position.y=-5,t.receiveShadow=!0,gemBackMaterial=new THREE.MeshPhysicalMaterial({map:null,color:255,metalness:.2,roughness:.5,opacity:.9,transparent:!0,shading:THREE.SmoothShading}),gemFrontMaterial=new THREE.MeshPhysicalMaterial({map:null,color:255,metalness:0,roughness:0,opacity:.15,side:THREE.FrontSide,transparent:!0,shading:THREE.SmoothShading,envMapIntensity:5,premultipliedAlpha:!0}),(new THREE.LoadingManager).onProgress=function(e,a,t){console.log(e,a,t)};var o=new THREE.MTLLoader;new THREE.MeshLambertMaterial;o.setBaseUrl("/"),o.setPath("/"),o.load("torso.mtl",function(e){e.preload();var a=new THREE.OBJLoader;a.setMaterials(e),a.setPath("/"),a.load("torso.obj",function(e){e.castShadow=!0,e.receiveShadow=!0,e.updateMatrix(),e.position.set(0,1.2,0),e.frustumCulled=!0,OBJLOADED=e,e.traverse(function(a){a instanceof THREE.Mesh&&"b0b0b0"==a.material.name&&(a.material=cleanWhite1,a.castShadow=!0,a.receiveShadow=!0),e.scale.set(2.02,2.02,2.02),scene.add(e)})})}),scene.add(new THREE.AmbientLight(2236962));var n=new THREE.SpotLight(16777215);n.position.set(100,140,130),n.intensity=1,n.castShadow=!0,n.angle-=4.71,n.intensity=.5,n.shadow.mapSize.width=512,n.shadow.mapSize.height=512,n.shadow.camera.near=50,n.shadow.camera.far=50,n.shadow.camera.fov=40,scene.add(n);new THREE.SpotLightHelper(n);(plight=new THREE.PointLight(43735,.8,2.7)).position.set(0,0,-500),scene.add(plight),renderer.shadowMap.enabled=!0,renderer.gammaInput=!0,renderer.gammaOutput=!0,stats=new Stats,container.appendChild(stats.dom),(controls=new THREE.OrbitControls(camera,renderer.domElement)).target.set(0,0,0),controls.enablePan=!1,controls.enableZoom=!0,controls.enableDamping=!0,controls.minPolarAngle=.8,controls.maxPolarAngle=2.4,controls.dampingFactor=.07,controls.rotateSpeed=.09,renderer.setPixelRatio(window.devicePixelRatio),window.addEventListener("resize",onWindowResize,!1),renderer.domElement.addEventListener("dblclick",ondblclick,!1);var r=!1;$("div.fullscreen").click(function(){return 0==r?(THREEx.FullScreen.request(),r=!0):(THREEx.FullScreen.cancel(),r=!1)}),document.addEventListener("mousemove",onMouseMove,!1);var i=new dat.GUI;i.add(params,"reflectivity",0,1),i.add(params,"exposure",.1,2),i.add(params,"autoRotate"),i.add(params,"gemColor",["Blue","Green","Red","White","Black"]),i.open()}function onWindowResize(){var e=window.innerWidth,a=window.innerHeight;camera.aspect=e/a,camera.updateProjectionMatrix(),renderer.setSize(e,a)}function onMouseMove(e){e.preventDefault(),mouse.x=e.clientX/window.innerWidth*2-1,mouse.y=-e.clientY/window.innerHeight*2+1;var a=new THREE.Vector3(mouse.x,mouse.y,.5);a.unproject(camera);var t=a.sub(camera.position).normalize(),o=-camera.position.z/t.z,n=camera.position.clone().add(t.multiplyScalar(o));plight.position.copy(n)}function ondblclick(e){camera.position.x,camera.position.y,camera.position.z;var a=-camera.position.x*Math.cos(5.49779)-camera.position.z*Math.sin(5.49779),t=camera.position.x*Math.cos(.78)+camera.position.z*Math.sin(.78);console.log("click");var o=camera.position.clone(),n=camera.position.clone(),r=camera.position.clone();o.applyMatrix4(camera.matrixWorld),n.applyMatrix4(camera.matrixWorld),r.applyMatrix4(camera.matrixWorld);var i={x:t,y:a,z:a},s={x:7,y:2,z:18};new TWEEN.Tween(i).to(s,1500).easing(TWEEN.Easing.Linear.None).onUpdate(function(){camera.position.set(this.x,this.y,this.z),camera.lookAt(new THREE.Vector3(0,0,0))}).onComplete(function(){camera.lookAt(new THREE.Vector3(0,0,0))}).start()}function animate(){TWEEN.update(),requestAnimationFrame(animate),stats.begin(),render(),stats.end()}function render(){controls.update(),renderer.autoClear=!1,renderer.clear(),gemBackMaterial.reflectivity=params.reflectivity;var e=gemBackMaterial.color;switch(params.gemColor){case"Blue":e=new THREE.Color(136);break;case"Red":e=new THREE.Color(8912896);break;case"Green":e=new THREE.Color(34816);break;case"White":e=new THREE.Color(8947848);break;case"Black":e=new THREE.Color(986895)}gemBackMaterial.color=e,renderer.toneMappingExposure=params.exposure;Date.now();if(camera.lookAt(scene.position),params.autoRotate)for(var a=0,t=objects.length;a<t;a++){var o=objects[a];o.rotation.y+=.005,o.scale.x=o.scale.y=o.scale.z=.2}renderer.render(scene,camera)}Detector.webgl||Detector.addGetWebGLMessage();var container,stats,params={projection:"normal",autoRotate:!0,reflectivity:.5,background:!1,exposure:1,gemColor:"Green"},plight,camera,scene,renderer,controls,objects=[],hdrCubeMap,composer,gemBackMaterial,gemFrontMaterial,hdrCubeRenderTarget,projector=new THREE.Projector,cleanWhite1=new THREE.MeshStandardMaterial({color:16777215,specular:0,combine:THREE.MixOperation,metalness:.3,roughness:.9,wireframe:!0,reflectivity:.5,wireframe:!0}),ray,OBJLOADED,mouse=new THREE.Vector2;init(),animate();var posX=camera.position.x,posY=camera.position.y,posZ=camera.position.z;$(document).ready(function(){var e={x:camera.position.x-40,y:camera.position.y-40,z:camera.position.z-40},a={x:7,y:2,z:18};new TWEEN.Tween(e).to(a,2500).easing(TWEEN.Easing.Sinusoidal.InOut).onUpdate(function(){camera.position.set(this.x,this.y,this.z),camera.lookAt(new THREE.Vector3(0,0,0))}).onComplete(function(){camera.lookAt(new THREE.Vector3(0,0,0))}).start()});
